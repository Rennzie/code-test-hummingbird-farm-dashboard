(this["webpackJsonpcode-test-hummingbird-farm-dashboard"]=this["webpackJsonpcode-test-hummingbird-farm-dashboard"]||[]).push([[0],{100:function(e,t,a){e.exports=a(194)},194:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(7),i=a.n(c),l=a(234),o=a(225),u=a(236),s=a(238),d=(a(105),a(6)),f=a(237),p=a(228),m=a(91),y=a(197),b=a(231),h=a(232),v=a(233),O=new Map([["Winter Wheat - Reflectance","#FFCDD2"],["Winter Wheat - Sundance","#F44336"],["Winter Wheat - Skyfall","#C62828"],["Winter Wheat - Dickens","#D50000"],["Sprint Wheat - Granary","#795548"],["Sprint Wheat - Belepi","#3E2723"],["Winter Barley - California","#A5D6A7"],["Winter Barley - Belfry","#388E3C"],["Winter Barley - Craft","#1B5E20"],["Winter OSR - Harper","#FDD835"]]),j=Object(o.a)((function(){return{legendWrapper:{position:"absolute",right:10,top:10,zIndex:1e3}}}));var E=function(){var e=j({}),t=Object(r.useState)(null),a=Object(d.a)(t,2),c=a[0],i=a[1],l=Object(r.useState)([{name:"",color:""}]),o=Object(d.a)(l,2),u=o[0],s=o[1];Object(r.useEffect)((function(){var e=[];O.forEach((function(t,a){return e.push({name:a,color:t})})),s(e)}),[s]);var f=function(){i(null)};return n.a.createElement("div",{className:e.legendWrapper},n.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(e){i(e.currentTarget)}},"Crop Legend"),n.a.createElement(m.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:f,variant:"menu"},u.map((function(e){return n.a.createElement(y.a,{key:e.name,style:{display:"flex",justifyContent:"center"}},n.a.createElement(b.a,null,n.a.createElement("div",{style:{width:40,height:20,backgroundColor:e.color}})),n.a.createElement(h.a,{primary:e.name}))})),n.a.createElement(v.a,{onClick:f},"Close Menu")))},g=a(50);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e,t,a){return t.map((function(t){if(t.name===a){var r=function(e,t,a,r,n){var c=e*t/(a*r)*n;return Math.round(c)}(e.expected_yield,t.hectares,e.disease_risk_factor,t.disease_susceptibility,e.price_per_tonne);return C({},t,{selectedCrop:e,yield:r})}return t}))},D=function(e,t,a){var r;return{farmYield:function(e){return e.reduce((function(e,t){var a=t.yield;return a?e+a:e}),0)}(r=a?S(a,e,t):function(e,t){return e.map((function(e){return e.name===t?C({},e,{selectedCrop:null,yield:0}):e}))}(e,t)),fields:r}};function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={farmYield:null,farmName:"",farmCenter:null,selectedField:"",fields:[]},x={farmState:F,farmDispatch:function(){}},P=Object(r.createContext)(x),B=function(e,t){switch(t.type){case"setFields":return k({},e,{fields:t.payload});case"setSelectedField":return k({},e,{selectedField:t.payload});case"setFieldCrop":return k({},e,{},D(e.fields,t.payload.fieldName,t.payload.crop));case"resetFieldCrop":return k({},e,{},D(e.fields,t.payload));default:throw new Error("action type ".concat(t.type," does not match any available action"))}};var N=function(){return Object(r.useContext)(P)};var z=function(e){var t=e.field,a=N(),c=a.farmState.selectedField,i=a.farmDispatch,l=Object(r.useState)("#BDBDBD"),o=Object(d.a)(l,2),u=o[0],s=o[1],p=Object(r.useState)(),m=Object(d.a)(p,2),y=m[0],b=m[1];return Object(r.useEffect)((function(){return c===t.name?b({color:"#32cd32",opacity:1}):b({color:u,opacity:1})}),[c,t,b,u]),Object(r.useEffect)((function(){if(t.selectedCrop){var e=O.get(t.selectedCrop.name);e&&s(e)}else s("#BDBDBD")}),[t]),n.a.createElement(f.a,{style:function(){return y},fillColor:u,fillOpacity:.7,data:t.boundary,onclick:function(){i({type:"setSelectedField",payload:t.name})}})},_=a(230),I=a(56),M=a(235),R=a(52),A=a.n(R);var Y=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(d.a)(c,2),l=i[0],o=i[1],u=Object(r.useState)(),s=Object(d.a)(u,2),f=s[0],p=s[1];return Object(r.useEffect)((function(){o(!0),A.a.get("http://www.mocky.io/v2/5cc809b5300000a300055eac").then((function(e){return n({farm:e.data})})).catch((function(e){return p(e)})).finally((function(){return o(!1)}))}),[o,n]),{data:a,loading:l,error:f}};var J=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(d.a)(c,2),l=i[0],o=i[1],u=Object(r.useState)(),s=Object(d.a)(u,2),f=s[0],p=s[1];return Object(r.useEffect)((function(){o(!0),A.a.get("http://www.mocky.io/v2/5cc8098e300000a300055eab").then((function(e){return n({crops:e.data})})).catch((function(e){return p(e)})).finally((function(){return o(!1)}))}),[o,n]),{data:a,loading:l,error:f}},T=Object(o.a)((function(e){return{selectedFieldWrapper:{padding:(0,e.spacing)(2),boxSizing:"border-box",width:"100%",height:"200px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},detailsWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}}}));var q=function(){var e=T({}),t=N(),a=t.farmState,c=a.selectedField,i=a.fields,l=t.farmDispatch,o=J(),u=o.data,s=o.loading,f=Object(r.useState)(),p=Object(d.a)(f,2),m=p[0],y=p[1];return Object(r.useEffect)((function(){if(c){var e=i.find((function(e){return e.name===c}));y(e)}}),[y,i,c]),n.a.createElement(_.a,{square:!0,className:e.selectedFieldWrapper},m&&!s?n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{variant:"h6"},m.name),n.a.createElement("div",{className:e.detailsWrapper},n.a.createElement(I.a,{variant:"body1"},"Area: ",m.hectares),n.a.createElement(I.a,{variant:"body1"},"Estimated yield value: \xa3",m.yield)),n.a.createElement(M.a,{id:"standard-select-currency",select:!0,fullWidth:!0,label:"Crop",value:m.selectedCrop?m.selectedCrop.name:"",onChange:function(e){if("remove-crop"===e.target.value)l({type:"resetFieldCrop",payload:c});else{var t=u.crops.find((function(t){return t.name===e.target.value}));l({type:"setFieldCrop",payload:{fieldName:c,crop:t}})}},helperText:m.selectedCrop?"Change your crop":"Choose a crop",margin:"normal"},n.a.createElement(v.a,{value:""}),u.crops.map((function(e){return n.a.createElement(v.a,{key:e.name,value:e.name},e.name)})),n.a.createElement(v.a,{disabled:!m.selectedCrop,value:"remove-crop"},"Remove Crop"))):n.a.createElement(I.a,{component:"i"},"Select a field to see its details"))},G=a(60),H=Object(o.a)((function(){return{dashPanel:{padding:26,boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"30vw",height:"100vh"}}}));var L=function(e){var t=e.farmName,a=H({}),c=N().farmState,i=c.farmYield,l=c.fields,o=Object(r.useState)([{key:"",data:0}]),u=Object(d.a)(o,2),s=u[0],f=u[1];return Object(r.useEffect)((function(){var e=l.map((function(e){return{key:e.name,data:e.yield?e.yield:0}}));f(e)}),[l,f]),n.a.createElement("section",{className:a.dashPanel},n.a.createElement(I.a,{variant:"h4"},t),n.a.createElement(I.a,{variant:"h6"},"Estimated farm yield value: \xa3",i),n.a.createElement(q,null),n.a.createElement(E,null),n.a.createElement("div",null,n.a.createElement(I.a,{align:"center"},"Estimated yield value per field"),n.a.createElement(G.BarChart,{series:n.a.createElement(G.BarSeries,{colorScheme:"pastel1"}),height:300,width:400,data:s})))},$=Object(o.a)((function(){return{appWrapper:{display:"flex",width:"100vw",height:"100vh"}}}));var K=function(){var e=$({}),t=N(),a=t.farmState.fields,c=t.farmDispatch,i=Y(),o=i.data,d=i.loading;return Object(r.useEffect)((function(){o&&c({type:"setFields",payload:o.farm.fields})}),[o,c]),d?n.a.createElement(l.a,{style:{margin:"0 auto"},size:100}):n.a.createElement("main",{className:e.appWrapper},o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(L,{farmName:o.farm.name}),n.a.createElement(u.a,{style:{width:"70vw",height:"100vh"},center:o.farm.centre.coordinates,zoom:14},n.a.createElement(s.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map((function(e){return n.a.createElement(z,{key:e.name,field:e})}))),n.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement((function(e){var t=e.children,a=Object(r.useReducer)(B,F),c=Object(d.a)(a,2),i=c[0],l=c[1];return n.a.createElement(P.Provider,{value:{farmState:i,farmDispatch:l}},t)}),null,n.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[100,1,2]]]);
//# sourceMappingURL=main.4751e591.chunk.js.map