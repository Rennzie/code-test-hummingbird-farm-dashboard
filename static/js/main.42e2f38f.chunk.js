(this["webpackJsonpcode-test-hummingbird-farm-dashboard"]=this["webpackJsonpcode-test-hummingbird-farm-dashboard"]||[]).push([[0],{101:function(e,t,a){e.exports=a(195)},195:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(7),i=a.n(c),l=a(235),o=a(236),u=a(89),s=a(239),d=a(240),f=(a(106),a(6)),p=a(238),m=a(229),y=a(92),b=a(198),h=a(232),v=a(233),O=a(234),j=new Map([["Winter Wheat - Reflectance","#FFCDD2"],["Winter Wheat - Sundance","#F44336"],["Winter Wheat - Skyfall","#C62828"],["Winter Wheat - Dickens","#D50000"],["Sprint Wheat - Granary","#795548"],["Sprint Wheat - Belepi","#3E2723"],["Winter Barley - California","#A5D6A7"],["Winter Barley - Belfry","#388E3C"],["Winter Barley - Craft","#1B5E20"],["Winter OSR - Harper","#FDD835"]]),E=Object(u.a)((function(){return{legendWrapper:{position:"absolute",right:10,top:10,zIndex:1e3}}}));var g=function(){var e=E({}),t=Object(r.useState)(null),a=Object(f.a)(t,2),c=a[0],i=a[1],l=Object(r.useState)([{name:"",color:""}]),o=Object(f.a)(l,2),u=o[0],s=o[1];Object(r.useEffect)((function(){var e=[];j.forEach((function(t,a){return e.push({name:a,color:t})})),s(e)}),[s]);var d=function(){i(null)};return n.a.createElement("div",{className:e.legendWrapper},n.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(e){i(e.currentTarget)}},"Crop Legend"),n.a.createElement(y.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:d,variant:"menu"},u.map((function(e){return n.a.createElement(b.a,{key:e.name,style:{display:"flex",justifyContent:"center"}},n.a.createElement(h.a,null,n.a.createElement("div",{style:{width:40,height:20,backgroundColor:e.color}})),n.a.createElement(v.a,{primary:e.name}))})),n.a.createElement(O.a,{onClick:d},"Close Menu")))},w=a(50);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=function(e,t,a){return t.map((function(t){if(t.name===a){var r=function(e,t,a,r,n){var c=e*t/(a*r)*n;return Math.round(c)}(e.expected_yield,t.hectares,e.disease_risk_factor,t.disease_susceptibility,e.price_per_tonne);return S({},t,{selectedCrop:e,yield:r})}return t}))},W=function(e,t,a){var r;return{farmYield:function(e){return e.reduce((function(e,t){var a=t.yield;return a?e+a:e}),0)}(r=a?D(a,e,t):function(e,t){return e.map((function(e){return e.name===t?S({},e,{selectedCrop:null,yield:0}):e}))}(e,t)),fields:r}};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={farmYield:null,farmName:"",farmCenter:null,selectedField:"",fields:[]},P={farmState:x,farmDispatch:function(){}},B=Object(r.createContext)(P),N=function(e,t){switch(t.type){case"setFields":return F({},e,{fields:t.payload});case"setSelectedField":return F({},e,{selectedField:t.payload});case"setFieldCrop":return F({},e,{},W(e.fields,t.payload.fieldName,t.payload.crop));case"resetFieldCrop":return F({},e,{},W(e.fields,t.payload));default:throw new Error("action type ".concat(t.type," does not match any available action"))}};var z=function(){return Object(r.useContext)(B)};var _=function(e){var t=e.field,a=z(),c=a.farmState.selectedField,i=a.farmDispatch,l=Object(r.useState)("#BDBDBD"),o=Object(f.a)(l,2),u=o[0],s=o[1],d=Object(r.useState)(),m=Object(f.a)(d,2),y=m[0],b=m[1];return Object(r.useEffect)((function(){return c===t.name?b({color:"#32cd32",opacity:1}):b({color:u,opacity:1})}),[c,t,b,u]),Object(r.useEffect)((function(){if(t.selectedCrop){var e=j.get(t.selectedCrop.name);e&&s(e)}else s("#BDBDBD")}),[t]),n.a.createElement(p.a,{style:function(){return y},fillColor:u,fillOpacity:.7,data:t.boundary,onclick:function(){i({type:"setSelectedField",payload:t.name})}})},I=a(231),M=a(56),R=a(237),A=a(52),Y=a.n(A);var J=function(){var e=Object(r.useState)(),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(f.a)(c,2),l=i[0],o=i[1],u=Object(r.useState)(),s=Object(f.a)(u,2),d=s[0],p=s[1];return Object(r.useEffect)((function(){o(!0),Y.a.get("https://www.mocky.io/v2/5cc809b5300000a300055eac").then((function(e){return n({farm:e.data})})).catch((function(e){return p(e)})).finally((function(){return o(!1)}))}),[o,n]),{data:a,loading:l,error:d}};var T=function(){var e=Object(r.useState)(),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),i=Object(f.a)(c,2),l=i[0],o=i[1],u=Object(r.useState)(),s=Object(f.a)(u,2),d=s[0],p=s[1];return Object(r.useEffect)((function(){o(!0),Y.a.get("https://www.mocky.io/v2/5cc8098e300000a300055eab").then((function(e){return n({crops:e.data})})).catch((function(e){return p(e)})).finally((function(){return o(!1)}))}),[o,n]),{data:a,loading:l,error:d}},q=Object(u.a)((function(e){return{selectedFieldWrapper:{padding:(0,e.spacing)(2),boxSizing:"border-box",width:"100%",height:"200px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},detailsWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}}}));var G=function(){var e=q({}),t=z(),a=t.farmState,c=a.selectedField,i=a.fields,l=t.farmDispatch,o=T(),u=o.data,s=o.loading,d=Object(r.useState)(),p=Object(f.a)(d,2),m=p[0],y=p[1];return Object(r.useEffect)((function(){if(c){var e=i.find((function(e){return e.name===c}));y(e)}}),[y,i,c]),n.a.createElement(I.a,{square:!0,className:e.selectedFieldWrapper},m&&!s?n.a.createElement(n.a.Fragment,null,n.a.createElement(M.a,{variant:"h6"},m.name),n.a.createElement("div",{className:e.detailsWrapper},n.a.createElement(M.a,{variant:"body1"},"Area: ",m.hectares),n.a.createElement(M.a,{variant:"body1"},"Estimated yield value: \xa3",m.yield)),n.a.createElement(R.a,{id:"standard-select-currency",select:!0,fullWidth:!0,label:"Crop",value:m.selectedCrop?m.selectedCrop.name:"",onChange:function(e){if("remove-crop"===e.target.value)l({type:"resetFieldCrop",payload:c});else{var t=u.crops.find((function(t){return t.name===e.target.value}));l({type:"setFieldCrop",payload:{fieldName:c,crop:t}})}},helperText:m.selectedCrop?"Change your crop":"Choose a crop",margin:"normal"},n.a.createElement(O.a,{value:""}),u.crops.map((function(e){return n.a.createElement(O.a,{key:e.name,value:e.name},e.name)})),n.a.createElement(O.a,{disabled:!m.selectedCrop,value:"remove-crop"},"Remove Crop"))):n.a.createElement(M.a,{component:"i"},"Select a field to see its details"))},H=a(60),L=Object(u.a)((function(){return{dashPanel:{padding:26,boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"30vw",height:"100vh"}}}));var $=function(e){var t=e.farmName,a=L({}),c=z().farmState,i=c.farmYield,l=c.fields,o=Object(r.useState)([{key:"",data:0}]),u=Object(f.a)(o,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){var e=l.map((function(e){return{key:e.name,data:e.yield?e.yield:0}}));d(e)}),[l,d]),n.a.createElement("section",{className:a.dashPanel},n.a.createElement(M.a,{variant:"h4"},t),n.a.createElement(M.a,{variant:"h6"},"Estimated farm yield value: \xa3",i),n.a.createElement(G,null),n.a.createElement(g,null),n.a.createElement("div",null,n.a.createElement(M.a,{align:"center"},"Estimated yield value per field"),n.a.createElement(H.BarChart,{series:n.a.createElement(H.BarSeries,{colorScheme:"pastel1"}),height:300,width:400,data:s})))},K=Object(u.a)((function(){return{appWrapper:{display:"flex",width:"100vw",height:"100vh"}}}));var Q=function(){var e=K({}),t=z(),a=t.farmState.fields,c=t.farmDispatch,i=J(),u=i.data,f=i.loading;return Object(r.useEffect)((function(){u&&c({type:"setFields",payload:u.farm.fields})}),[u,c]),f?n.a.createElement(l.a,{style:{margin:"0 auto"},size:100}):n.a.createElement(n.a.Fragment,null,n.a.createElement(o.a,null),n.a.createElement("main",{className:e.appWrapper},u&&n.a.createElement(n.a.Fragment,null,n.a.createElement($,{farmName:u.farm.name}),n.a.createElement(s.a,{style:{width:"70vw",height:"100vh"},center:u.farm.centre.coordinates,zoom:14},n.a.createElement(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map((function(e){return n.a.createElement(_,{key:e.name,field:e})}))),n.a.createElement(g,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement((function(e){var t=e.children,a=Object(r.useReducer)(N,x),c=Object(f.a)(a,2),i=c[0],l=c[1];return n.a.createElement(B.Provider,{value:{farmState:i,farmDispatch:l}},t)}),null,n.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[101,1,2]]]);
//# sourceMappingURL=main.42e2f38f.chunk.js.map